# 系統限制與業務規則

本文件總結 MyAB 我的記帳簿軟體的系統限制和業務規則。

## 目錄
1. [資料庫限制](#91-資料庫限制)
2. [科目規則](#92-科目規則)
3. [帳號與密碼規則](#93-帳號與密碼規則)
4. [匯入匯出規則](#94-匯入匯出規則)
5. [外幣處理](#95-外幣處理)
6. [備份規則](#96-備份規則)
7. [版本要求](#97-版本要求)
8. [檔案路徑與位置](#98-檔案路徑與位置)

---

## 9.1 資料庫限制

### 記錄數量上限
- 一個資料庫有 **30,000 筆**的上限
- 超過上限需使用結帳功能清除舊資料
- 舊資料可另存為新資料庫保留

### 處理方式
- **結帳功能**：清除指定日期前的記錄
- **另存舊資料**：保留歷史記錄在新資料庫
- **定期維護**：建議接近上限時執行結帳

### 明細長度限制
- 記錄總覽顯示最多 **125 字元**
- 超過部分會被截斷
- 完整明細仍儲存在資料庫中

---

## 9.2 科目規則

### 預設科目
系統預設包含兩個無法刪除的科目：
- **現金**（A-現金）：基本資產科目
- **Equity**：權益科目，用於特殊調整

### 科目分類
所有科目必須歸類為以下四大類之一：
1. **資產 (Asset)**：可用的金錢
2. **負債 (Liability)**：需償還的金錢
3. **收入 (Income)**：使資產增加或負債減少
4. **支出 (Expense)**：使資產減少或負債增加

### 科目命名建議
- 建議使用類型前綴（A-、L-、I-、E-）
- 有助於快速識別科目類型
- 範例：
  - A-銀行存款（資產）
  - L-信用卡（負債）
  - I-薪資（收入）
  - E-餐飲費（支出）

### 科目設定規則
- 科目名稱支援中文
- 每個帳本可以有不同的科目設定
- 科目一旦建立，類型不可更改
- 刪除科目前需確認無相關交易記錄

---

## 9.3 帳號與密碼規則

### 帳號名稱
- **格式**：支援中文或英文
- **建議**：使用英文以避免相容性問題
- **用途**：區分不同使用者的資料

### 密碼
- **格式限制**：僅限英數字元組合
- **不支援**：特殊符號、中文
- **用途**：保護帳號資料

### 帳號管理
- 一個軟體可建立多個帳號
- 每個帳號資料獨立儲存
- 帳號之間資料不互通
- 刪除帳號會永久刪除其所有資料

---

## 9.4 匯入匯出規則

### 匯出格式

#### HTML 格式
- **用途**：瀏覽和列印
- **特點**：格式化顯示
- **限制**：**無法用於匯入**
- **適用**：報表輸出、列印

#### CSV 格式
- **用途**：資料交換和備份
- **特點**：完整資料格式
- **支援**：可再次匯入軟體
- **適用**：資料備份、Excel 分析

### 匯入規則

#### 檔案要求
- 必須是從 MyAB 記錄總覽功能匯出的 CSV 檔
- 需包含完整欄位格式
- 單一科目匯出的 CSV 可能不支援匯入

#### 欄位要求
必要欄位：
```
日期,交易類型,支出科目,收入科目,從科目,到科目,金額,明細,發票號碼
```

#### 科目匹配
- 匯入時會檢查科目是否存在
- 不存在的科目需先建立
- 建議先在測試帳本匯入確認

---

## 9.5 外幣處理

### 基本限制
- 每個帳本只能處理**單一幣別**
- 不支援在同一帳本中混用多種幣別

### 處理方式
- 為不同幣別建立獨立帳本
- 範例：
  - 台幣帳本
  - 美金帳本
  - 日幣帳本

### 匯兌記錄
- 使用「買賣外幣」科目連接不同帳本
- 在台幣帳本記為支出
- 在外幣帳本記為收入

---

## 9.6 備份規則

### 自動備份
- 軟體關閉時自動備份
- 每天僅保留一份最新檔案
- 系統保留最近 **10 個備份檔案**
- 舊備份自動刪除

### 備份檔案
- **格式**：.mbu（MyAB Backup）
- **命名**：yyyy-mm-dd.mbu
- **內容**：完整帳本資料

### 預設備份路徑
```
C:\Program Files\MyAB\Backup\
```

### 自訂備份路徑
- 可透過「一般設定」→「儲存」選項自訂
- 建議設定到雲端硬碟資料夾
- 實現自動雲端備份

### 備份策略建議
1. **依賴自動備份**：日常保護
2. **定期手動備份**：每週/每月
3. **重要操作前備份**：變更前保護
4. **多地備份**：本機+雲端+外部儲存

---

## 9.7 版本要求

### 特定功能的版本需求

#### 金額欄計算功能
- **需求版本**：MyAB 3.3.8 或更高版本
- **功能**：金額欄位支援直接計算（+、-、*、/）

#### MacMoney 資料轉換
- **需求版本**：MyAB 3.5.6 或更高版本
- **功能**：匯入 MacMoney 的 CSV 檔案

#### 雲端硬碟同步
- **需求版本**：MyAB 3.1.3 或更高版本
- **功能**：設定資料路徑到雲端硬碟

### 版本檢查
- 在「關於」或「說明」選單中查看版本
- 建議使用最新版本以獲得完整功能

---

## 9.8 檔案路徑與位置

### 預設安裝路徑
```
C:\Program Files\MyAB\
或
C:\Program Files (x86)\MyAB\
```

### 自動備份路徑
```
預設：C:\Program Files\MyAB\Backup\
可自訂於「一般設定」→「儲存」選項
```

### 系統備份路徑
```
C:\使用者\(Windows帳號)\AppData\Local\VirtualStore\Program Files (x86)\MyAB\Backup\(帳號)\
```

### 網路記帳網址
```
https://www.devon.riceball.net/mos/
```

### 建議安裝位置
**推薦**：
- D:\MyAB\
- E:\MyAB\
- C:\MyAB\

**避免**（可能有權限問題）：
- C:\Program Files\
- C:\Program Files (x86)\

---

## 9.9 交易規則

### 金額規則
- 金額必須為數字
- 支援小數點（通常到小數點後兩位）
- 負數用於特殊情況（如退貨）
- 零金額可能被拒絕

### 日期規則
- 支援過去日期
- 支援未來日期（如定期記錄）
- 日期格式通常為 YYYY/MM/DD

### 科目選擇規則

#### 支出交易
- 支付給：必須為支出科目（E-）
- 從科目：必須為資產或負債科目（A-、L-）

#### 收入交易
- 進帳從：必須為收入科目（I-）
- 到科目：必須為資產或負債科目（A-、L-）

#### 轉帳交易
- 轉換到：資產或負債科目
- 從科目：資產或負債科目
- 兩者必須為不同科目

---

## 9.10 發票規則

### 發票號碼輸入
- 只需輸入**數字部分**
- 不需輸入英文字母
- 範例：AB-12345678 → 輸入 12345678

### 對獎規則
- 需要網路連線取得中獎號碼
- 每期對獎需手動執行
- 系統不會自動對獎

---

## 9.11 定期記錄規則

### 觸發條件
- 需要開啟軟體才會觸發
- 依據設定的日期和時間
- 逾期未開啟軟體會累積提示

### 產生記錄
- 定期記錄產生後成為一般交易
- 可以編輯或刪除產生的記錄
- 修改定期設定不影響已產生的記錄

---

## 9.12 分期付款規則

### 金額設定
- 金額欄填入的是「單期金額」
- **不是總額**
- 範例：分12期每期1000元，填入1000（不是12000）

### 期間設定
- 期間間隔可自訂
- 預設為1個月
- 可設定為2個月、3個月等

### 產生結果
- 一次產生多筆獨立記錄
- 每筆記錄可獨立編輯
- 刪除一筆不影響其他筆

---

## 9.13 資料安全規則

### 備份原則
- **重要操作前必須備份**
- 包括：結帳、合併、刪除大量資料
- 備份到多個位置

### 不可逆操作
以下操作無法復原（除非從備份還原）：
- 刪除交易記錄
- 刪除科目
- 結帳清除資料
- 刪除帳本
- 刪除帳號

### 權限問題
- 避免安裝在 Program Files
- 可能遇到 Windows UAC 限制
- 建議安裝到 D 槽或其他位置

---

## 9.14 雲端同步規則

### 同步時機
- 雲端軟體需在背景執行
- 修改資料後等待同步完成
- 不要同時在多台電腦修改

### 衝突處理
- 同時修改可能產生衝突檔案
- 雲端服務會保留兩個版本
- 需手動選擇正確版本

### 網路需求
- 需要網路連線才能同步
- 離線時可繼續使用
- 上線後自動同步

---

## 9.15 帳本管理規則

### 帳本合併
- 必須先備份
- Equity 帳戶需手動清理
- 建議從最早時期開始合併
- 合併是單向操作，無法拆分

### 帳本命名
- 支援中文命名
- 建議使用有意義的名稱
- 範例：「2024年」、「日本旅遊」

### 帳本刪除
- 刪除前必須確認
- 刪除後無法復原
- 建議先備份再刪除

---

## 總結

### 關鍵限制
1. 資料庫上限：30,000 筆
2. 單一帳本單一幣別
3. HTML 檔案無法匯入
4. 預設科目無法刪除

### 重要規則
1. 重要操作前必須備份
2. 科目類型一旦設定不可更改
3. 某些操作不可逆
4. 定期執行結帳維護效能

### 最佳實踐
1. 定期手動備份
2. 使用雲端同步
3. 合理規劃科目結構
4. 接近上限時執行結帳

---

## 相關文件

- 基礎設定請參閱 [基礎設定功能](./01-basic-setup.md)
- 資料管理請參閱 [資料管理](./05-data-management.md)
- 問題排除請參閱 [問題排除](./08-troubleshooting.md)
- 完整功能請參閱 [系統概述](./00-overview.md)
